"use strict";!function(){angular.module("searchPlayground").controller("StepController",function($scope,pubsubSystem){}).controller("SearchController",function($scope,pubsubSystem,$http){$scope.searchText="",$scope.searching=!1,$scope.filters=null,$scope.page=1,$scope.getDescriptionByKey=function(key){switch(key){case"year":return"Año";case"rtAllCriticsRating":return"Puntaje";case"actorTags":return"Actores";case"genreTags":return"Género"}return key},$scope.curateUrl=function(url){return url.replace(/"/g,"")},$scope.filter=function($event,filter,value){$event.preventDefault(),null!=$scope.filters&&$scope.filters.hasOwnProperty(filter)?delete $scope.filters[filter]:(null==$scope.filters&&($scope.filters={}),$scope.filters[filter]=value),$scope.search($event)},$scope.next=function($event){$scope.page++,$scope.search($event)},$scope.prev=function($event){$scope.page--,$scope.search($event)},$scope.search=function($event){$event.preventDefault(),$scope.searching=!0,$scope.results=null,$http({method:"POST",url:"/search",data:{Text:$scope.searchText,Filters:$scope.filters,IncludeFacets:!0,Page:$scope.page}}).then(function(response){$scope.results=response.data,pubsubSystem.publish("log",response.data),$scope.searching=!1},function(){})}})}();