"use strict";!function(){angular.module("searchPlayground").controller("StepController",function($scope,pubsubSystem){}).controller("SearchController",function($scope,pubsubSystem,$http){$scope.searchText="",$scope.searching=!1,$scope.filters=null,$scope.page=1,$scope.getDescriptionByKey=function(key){switch(key){case"year":return"Año";case"rtAllCriticsRating":return"Puntaje";case"actorTags":return"Actores";case"genreTags":return"Género"}return key},$scope.curateUrl=function(url){return url.replace(/"/g,"")},$scope.filter=function($event,filter,value){$event.preventDefault(),null!==$scope.filters&&$scope.filters.hasOwnProperty(filter)?delete $scope.filters[filter]:(null===$scope.filters&&($scope.filters={}),$scope.filters[filter]=value),$scope.search($event)},$scope.next=function($event){$scope.page++,$scope.search($event)},$scope.prev=function($event){$scope.page--,$scope.search($event)},$scope.search=function($event){$event.preventDefault(),$scope.searching=!0,$scope.results=null,$http({method:"POST",url:"/search",data:{Text:$scope.searchText,Filters:$scope.filters,IncludeFacets:!0,Page:$scope.page}}).then(function(response){$scope.results=response.data,pubsubSystem.publish("log",response.data),$scope.searching=!1},function(){})}}).controller("ScoringController",function($scope,pubsubSystem,$http){$scope.searchText="",$scope.searching=!1,$scope.page=1,$scope.profile="",$scope.tag="",$scope.curateUrl=function(url){return url.replace(/"/g,"")},$scope.next=function($event){$scope.page++,$scope.search($event)},$scope.prev=function($event){$scope.page--,$scope.search($event)},$scope.search=function($event){$event&&$event.preventDefault(),$scope.searching=!0,$scope.results=null,$http({method:"POST",url:"/search",data:{Text:$scope.searchText,ScoringProfile:$scope.profile,ScoringParameter:"Complete"==$scope.profile?$scope.tag:null,Page:$scope.page}}).then(function(response){$scope.results=response.data,pubsubSystem.publish("log",response.data),$scope.searching=!1},function(){})}}).controller("SuggestionController",function($scope,pubsubSystem,$http){$scope.noResults=!1,$scope.loading=!1,$scope.fuzzy="true",$scope.asyncSelected=null,$scope.getSuggestions=function(text){return $http({method:"GET",url:"/search/suggest?term="+text+"&fuzzy="+$scope.fuzzy}).then(function(response){pubsubSystem.publish("log",response.data);var map=response.data.Results.map(function(item){return item.Text});return map})}}).controller("AdvancedController",function($scope,pubsubSystem,$http){$scope.searchText="",$scope.searching=!1,$scope.page=1,$scope.curateUrl=function(url){return url.replace(/"/g,"")},$scope.next=function($event){$scope.page++,$scope.search($event)},$scope.prev=function($event){$scope.page--,$scope.search($event)},$scope.search=function($event){$event&&$event.preventDefault(),$scope.searching=!0,$scope.results=null,$http({method:"POST",url:"/search",data:{Text:$scope.searchText,QueryType:"full",Page:$scope.page}}).then(function(response){$scope.results=response.data,pubsubSystem.publish("log",response.data),$scope.searching=!1},function(){})}}).controller("SearchTwitterController",function($scope,pubsubSystem,$http){$scope.searchText="",$scope.searching=!1,$scope.filters=null,$scope.page=1,$scope.getDescriptionByKey=function(key){switch(key){case"account":return"Cuenta";case"hashtags":return"Hashtags"}return key},$scope.filter=function($event,filter,value){$event.preventDefault(),null!==$scope.filters&&$scope.filters.hasOwnProperty(filter)?delete $scope.filters[filter]:(null===$scope.filters&&($scope.filters={}),$scope.filters[filter]=value),$scope.search($event)},$scope.next=function($event){$scope.page++,$scope.search($event)},$scope.prev=function($event){$scope.page--,$scope.search($event)},$scope.search=function($event){$event.preventDefault(),$scope.searching=!0,$scope.results=null,$http({method:"POST",url:"/search",data:{Index:"tweets",Text:$scope.searchText,Filters:$scope.filters,IncludeFacets:!0,Page:$scope.page}}).then(function(response){$scope.results=response.data,pubsubSystem.publish("log",response.data),$scope.searching=!1},function(){})}})}();