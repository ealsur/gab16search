"use strict";!function(){angular.module("searchPlayground").controller("ChromeController",function($scope,$rootScope,$timeout,$state,$interval,$http,$uibModal,preloadImages){$scope.crumbs=[],$scope.loaded=!1,$scope.currentLog=null,$scope.showTooltips=!1;var masterMode=!1,firstLog=!0;$rootScope.$on("log",function(evt,json){$scope.currentLog=json,firstLog&&(firstLog=!1,$scope.showTooltips=!0,$timeout(function(){$scope.showTooltips=!1},3e3))}),$rootScope.$on("masterStep",function(evt,step){$scope.masterStep=step});var states=$state.get();$scope.stepCount=states.length,$scope.masterStep=$scope.stepCount,$scope.next=function($event){null!==$event&&$event.preventDefault(),firstLog=!0,$scope.currentLog=null,$scope.step=$scope.step+1;var nextState=states[$scope.step].name;$scope.crumbs.push(nextState),$state.go(nextState)},$scope.prev=function($event){null!==$event&&$event.preventDefault(),firstLog=!0,$scope.currentLog=null,$scope.step=$scope.step-1;var nextState=states[$scope.step].name;$scope.crumbs.pop(),$state.go(nextState)},$scope.goToStep=function(toStep){for(var nextState=null;$scope.step<toStep;)$scope.step=$scope.step+1,nextState=states[$scope.step].name,$scope.crumbs.push(nextState);null!==nextState&&$state.go(nextState)},$scope.step=0,$state.go("nocrumb-Splash"),preloadImages.preload(["images/indexers.png","images/indexes.png","images/pricing.png","images/ufo.png"]);var start=function(){$timeout(function(){$scope.loaded=!0,masterMode?$scope.goToStep($scope.masterStep):$scope.next(null)},2e3)},modalInstance=$uibModal.open({templateUrl:"modalTwitter.html",controller:"ModalTwitterController"});modalInstance.result.then(start,start);var interval=$interval(function(){$http({method:"GET",url:"/master/GetCurrent"}).then(function(response){null!==response.data.current?(masterMode=!0,$scope.step==$scope.masterStep-1&&$scope.next(null),$scope.masterStep=response.data.current):$interval.cancel(interval)})},2e3)}).controller("ModalTwitterController",function($scope,$uibModalInstance,$http){$scope.loading=!1,$scope.account="",$scope.ok=function(){$scope.loading=!0,$http({method:"POST",url:"/master/twitter",params:{account:$scope.account}}).then(function(response){$scope.loading=!1,$uibModalInstance.close()},function(){$uibModalInstance.close()})},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}})}();